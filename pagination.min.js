(n=>{var o="__pagination-",D=(n.Pagination&&r('plugin conflicted, the name "Pagination" has been taken by another plugin.'),{});function r(t){throw new Error("Pagination: "+t)}function s(t,e,a){t.addEventListener?t.addEventListener(e,a):t.attachEvent&&t.attachEvent("on"+e,a)}function l(t,e,a){e=new CustomEvent(e,{detail:a});t.dispatchEvent(e)}function f(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])}function d(t,e){for(var a in e)e.hasOwnProperty(a)&&("object"!=typeof e[a]||null===e[a]||Array.isArray(e[a])?t[a]=e[a]:(t[a]=t[a]||{},d(t[a],e[a])));return t}function a(t,e){this.container=t,this.attributes=d({},a.defaults),f(this.attributes,e),this.model={pageRange:this.attributes.pageRange,pageSize:this.attributes.pageSize},this.disabled=!!this.attributes.disabled,this.isAsync=!1,this.isDynamicTotalNumber=!1,this.breakpoints=this.attributes.breakpoints||{},this.currentBreakpoint=null,this.resizeTimeout=null,this.initialize(),0<Object.keys(this.breakpoints).length&&this.initializeBreakpoints()}["Object","Array","String"].forEach(function(a){D["is"+a]=function(t){return("object"==(e=typeof(t=t))?null==t?"null":Object.prototype.toString.call(t).slice(8,-1):e).toLowerCase()===a.toLowerCase();var e}}),a.prototype={initialize:function(){var t,e=this;e.container.paginationData||(e.container.paginationData={}),!1!==e.callHook("beforeInit")&&(e.container.paginationData.initialized&&(t=e.container.querySelector(".paginationjs"))&&t.remove(),e.parseDataSource(e.attributes.dataSource,function(t){e.isAsync=D.isString(t),D.isArray(t)&&(e.model.totalNumber=e.attributes.totalNumber=t.length),e.isDynamicTotalNumber=e.isAsync&&e.attributes.totalNumberLocator;t=e.render(!0);e.attributes.className&&t.classList.add(e.attributes.className),e.model.el=t,"bottom"===e.attributes.position?e.container.appendChild(t):e.container.insertBefore(t,e.container.firstChild),e.observer(),e.container.paginationData.initialized=!0,e.callHook("afterInit",t)}))},render:function(t){var e=this,a=e.model,i=a.el||(o="div",i="paginationjs",o=document.createElement(o),i&&(o.className=i),n&&(o.innerHTML=n),o),n=!0!==t,o=(e.callHook("beforeRender",n),a.pageNumber||e.attributes.pageNumber),t=e.attributes.pageRange||0,a=e.getTotalPage(),r=o-t,s=o+t;return(r=a<s?(r=(s=a)-2*t)<1?1:r:r)<=1&&(r=1,s=Math.min(2*t+1,a)),i.innerHTML=e.generateHTML({currentPage:o,pageRange:t,rangeStart:r,rangeEnd:s}),e.attributes.hideOnlyOnePage&&(i.style.display=a<=1?"none":"block"),e.callHook("afterRender",n),i},getPageLinkTag:function(t){var e=this.attributes.pageLink;return e?`<a href="${e}">${t}</a>`:`<a>${t}</a>`},generatePageNumbersHTML:function(t){var e,a=this,i=t.currentPage,n=a.getTotalPage(),o=t.rangeStart,r=t.rangeEnd,s="",t=a.attributes.ellipsisText,l=a.attributes.classPrefix,u=a.attributes.pageClassName||"",c=a.attributes.activeClassName||"",g=a.attributes.disableClassName||"";if(null===a.attributes.pageRange)for(e=1;e<=n;e++)s+=e==i?`<li class="${l}-page J-paginationjs-page ${u} ${c}" data-num="${e}"><a>${e}</a></li>`:`<li class="${l}-page J-paginationjs-page ${u}" data-num="${e}">${a.getPageLinkTag(e)}</li>`;else{if(o<=3)for(e=1;e<o;e++)s+=e==i?`<li class="${l}-page J-paginationjs-page ${u} ${c}" data-num="${e}"><a>${e}</a></li>`:`<li class="${l}-page J-paginationjs-page ${u}" data-num="${e}">${a.getPageLinkTag(e)}</li>`;else a.attributes.hideFirstOnEllipsisShow||(s+=`<li class="${l}-page ${l}-first J-paginationjs-page ${u}" data-num="1">${a.getPageLinkTag(1)}</li>`),s+=`<li class="${l}-ellipsis ${g}"><a>${t}</a></li>`;for(e=o;e<=r;e++)s+=e==i?`<li class="${l}-page J-paginationjs-page ${u} ${c}" data-num="${e}"><a>${e}</a></li>`:`<li class="${l}-page J-paginationjs-page ${u}" data-num="${e}">${a.getPageLinkTag(e)}</li>`;if(n-2<=r)for(e=r+1;e<=n;e++)s+=`<li class="${l}-page J-paginationjs-page ${u}" data-num="${e}">${a.getPageLinkTag(e)}</li>`;else s+=`<li class="${l}-ellipsis ${g}"><a>${t}</a></li>`,a.attributes.hideLastOnEllipsisShow||(s+=`<li class="${l}-page ${l}-last J-paginationjs-page ${u}" data-num="${n}">${a.getPageLinkTag(n)}</li>`)}return s},generateHTML:function(t){var e,a=this,i=t.currentPage,n=a.getTotalPage(),o=a.getTotalNumber(),r=a.attributes.pageSize,s=a.attributes.showPrevious,l=a.attributes.showNext,u=a.attributes.showPageNumbers,c=a.attributes.showNavigator,g=a.attributes.showSizeChanger,p=a.attributes.sizeChangerOptions,b=a.attributes.showGoInput,f=a.attributes.showGoButton,d=a.attributes.prevText,m=a.attributes.nextText,h=a.attributes.goButtonText,v=a.attributes.classPrefix,y=a.attributes.disableClassName||"",k=a.attributes.ulClassName||"",N=a.attributes.prevClassName||"",$=a.attributes.nextClassName||"",P="",T='<select class="J-paginationjs-size-select">',S='<input type="text" class="J-paginationjs-go-pagenumber">',h=`<input type="button" class="J-paginationjs-go-button" value="${h}">`,x="function"==typeof a.attributes.formatSizeChanger?a.attributes.formatSizeChanger(i,n,o):a.attributes.formatSizeChanger,C="function"==typeof a.attributes.formatNavigator?a.attributes.formatNavigator(i,n,o):a.attributes.formatNavigator,j="function"==typeof a.attributes.formatGoInput?a.attributes.formatGoInput(S,i,n,o):a.attributes.formatGoInput,H="function"==typeof a.attributes.formatGoButton?a.attributes.formatGoButton(h,i,n,o):a.attributes.formatGoButton,L="function"==typeof a.attributes.autoHidePrevious?a.attributes.autoHidePrevious():a.attributes.autoHidePrevious,w="function"==typeof a.attributes.autoHideNext?a.attributes.autoHideNext():a.attributes.autoHideNext,O="function"==typeof a.attributes.header?a.attributes.header(i,n,o):a.attributes.header,z="function"==typeof a.attributes.footer?a.attributes.footer(i,n,o):a.attributes.footer;if(O&&(P+=e=a.replaceVariables(O,{currentPage:i,totalPage:n,totalNumber:o})),c&&C&&(P+=`<div class="${v}-nav J-paginationjs-nav">${e=a.replaceVariables(C,{currentPage:i,totalPage:n,totalNumber:o,rangeStart:(i-1)*r+1,rangeEnd:Math.min(i*r,o)})}</div>`),(s||u||l)&&(P=P+'<div class="paginationjs-pages">'+(k?`<ul class="${k}">`:"<ul>"),s&&(i<=1?L||(P+=`<li class="${v}-prev ${y} ${N}"><a>${d}</a></li>`):P+=`<li class="${v}-prev J-paginationjs-previous ${N}" data-num="${i-1}" title="Previous page">${a.getPageLinkTag(d)}</li>`),u&&(P+=a.generatePageNumbersHTML(t)),l&&(n<=i?w||(P+=`<li class="${v}-next ${y} ${$}"><a>${m}</a></li>`):P+=`<li class="${v}-next J-paginationjs-next ${$}" data-num="${i+1}" title="Next page">${a.getPageLinkTag(m)}</li>`),P+="</ul></div>"),g&&D.isArray(p)){-1===p.indexOf(r)&&(p.unshift(r),p.sort((t,e)=>t-e));for(let t=0;t<p.length;t++)T+=`<option value="${p[t]}"${p[t]===r?" selected":""}>${p[t]} / page</option>`;e=T+="</select>",P+=`<div class="paginationjs-size-changer">${e=x?a.replaceVariables(x,{length:T,total:o}):e}</div>`}return b&&j&&(P+=`<div class="${v}-go-input">${e=a.replaceVariables(j,{currentPage:i,totalPage:n,totalNumber:o,input:S})}</div>`),f&&H&&(P+=`<div class="${v}-go-button">${e=a.replaceVariables(H,{currentPage:i,totalPage:n,totalNumber:o,button:h})}</div>`),z&&(P+=e=a.replaceVariables(z,{currentPage:i,totalPage:n,totalNumber:o})),P},findTotalNumberFromRemoteResponse:function(t){this.model.totalNumber=this.attributes.totalNumberLocator(t)},go:function(t,a){var i=this,n=i.model;if(!i.disabled){var o=t,o=parseInt(o);if(o&&!(o<1)){var t=i.attributes.pageSize,e=i.getTotalNumber(),r=i.getTotalPage();if(!(0<e&&r<o))if(i.isAsync){var e={},r=i.attributes.alias||{},s=r.pageSize||"pageSize",r=r.pageNumber||"pageNumber",s=(e[s]=t,e[r]=o,"function"==typeof i.attributes.ajax?i.attributes.ajax():i.attributes.ajax),l=(s&&s.pageNumberStartWithZero&&(e[r]=o-1),{type:"get",cache:!1,data:{},contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"json",async:!0});if(d(l,s),f(l.data,e),l.url=i.attributes.dataSource,l.success=function(t){try{i.model.originalResponse=t,i.isDynamicTotalNumber?i.findTotalNumberFromRemoteResponse(t):i.model.totalNumber=i.attributes.totalNumber,b(i.filterDataWithLocator(t))}catch(t){if("function"!=typeof i.attributes.onError)throw t;i.attributes.onError(t,"ajaxSuccessHandlerError")}},l.error=function(t,e,a){i.attributes.formatAjaxError&&i.attributes.formatAjaxError(t,e,a),i.enable()},i.disable(),i.attributes.ajaxFunction)i.attributes.ajaxFunction(l);else{var u=new XMLHttpRequest,t=l.url,r=l.type.toUpperCase();if("GET"===r){var c=[];for(g in l.data)c.push(encodeURIComponent(g)+"="+encodeURIComponent(l.data[g]));0<c.length&&(t+=(-1===t.indexOf("?")?"?":"&")+c.join("&"))}if(u.open(r,t,l.async),u.setRequestHeader("Content-Type",l.contentType),u.onreadystatechange=function(){var t;4===u.readyState&&(200<=u.status&&u.status<300?(t=JSON.parse(u.responseText),l.success(t)):l.error(u,"error",u.statusText))},"POST"===r){var g,p=[];for(g in l.data)p.push(encodeURIComponent(g)+"="+encodeURIComponent(l.data[g]));u.send(p.join("&"))}else u.send()}}else b(i.getPagingData(o))}}function b(t){var e;!1!==i.callHook("beforePaging",o)&&(n.direction=void 0===n.pageNumber?0:o>n.pageNumber?1:-1,n.pageNumber=o,i.render(),i.disabled&&i.isAsync&&i.enable(),i.container.paginationData.model=n,i.attributes.formatResult&&(e=0<t.length&&t[0]instanceof Element?Array.from(t):JSON.parse(JSON.stringify(t)),D.isArray(t=i.attributes.formatResult(e))||(t=e)),i.container.paginationData.currentPageData=t,i.doCallback(t,a),i.callHook("afterPaging",o),1==o?i.callHook("afterIsFirstPage"):o==i.getTotalPage()&&i.callHook("afterIsLastPage"))}},doCallback:function(t,e){var a=this.model;"function"==typeof e?e(t,a):"function"==typeof this.attributes.callback&&this.attributes.callback(t,a)},destroy:function(){var t;!1!==this.callHook("beforeDestroy")&&(this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.model.el.remove(),this.container.paginationData={},(t=document.getElementById("paginationjs-style"))&&t.remove(),this.callHook("afterDestroy"))},previous:function(t){this.go(this.model.pageNumber-1,t)},next:function(t){this.go(this.model.pageNumber+1,t)},disable:function(){var t=this,e=t.isAsync?"async":"sync";!1!==t.callHook("beforeDisable",e)&&(t.disabled=!0,t.model.disabled=!0,t.callHook("afterDisable",e))},enable:function(){var t=this,e=t.isAsync?"async":"sync";!1!==t.callHook("beforeEnable",e)&&(t.disabled=!1,t.model.disabled=!1,t.callHook("afterEnable",e))},refresh:function(t){this.go(this.model.pageNumber,t)},show:function(){"none"===this.model.el.style.display&&(this.model.el.style.display="block")},hide:function(){"none"!==this.model.el.style.display&&(this.model.el.style.display="none")},replaceVariables:function(t,e){for(var a in e)var i=e[a],a=new RegExp("<%=\\s*"+a+"\\s*%>","img"),n=(n||t).replace(a,i);return n},getPagingData:function(t){var e=this.attributes.pageSize,a=this.attributes.dataSource,i=this.getTotalNumber(),n=e*(t-1)+1,t=Math.min(t*e,i);return 0<a.length&&a[0]instanceof Element,a.slice(n-1,t)},getTotalNumber:function(){return this.model.totalNumber||this.attributes.totalNumber||0},getTotalPage:function(){return Math.ceil(this.getTotalNumber()/this.attributes.pageSize)},getLocator:function(t){var e;return"string"==typeof t?e=t:"function"==typeof t?e=t():r('"locator" is incorrect. Expect string or function type.'),e},filterDataWithLocator:function(t){var e,a=this.getLocator(this.attributes.locator);if(D.isObject(t)){try{for(var i=a.split("."),n=0;n<i.length;n++)e=(e||t)[i[n]]}catch(t){}e?D.isArray(e)||r("dataSource."+a+" should be an Array."):r("dataSource."+a+" is undefined.")}return e||t},parseDataSource:function(t,e){var a=this;D.isObject(t)?e(a.attributes.dataSource=a.filterDataWithLocator(t)):D.isArray(t)?e(a.attributes.dataSource=t):"function"==typeof t?t(function(t){D.isArray(t)||r('The parameter of "done" Function should be an Array.'),a.parseDataSource.call(a,t,e)}):"string"==typeof t?(/^https?|file:/.test(t)&&(a.attributes.ajaxDataType="jsonp"),e(t)):r("Unexpected dataSource type")},callHook:function(t){var e,a=this.container.paginationData||{},i=Array.prototype.slice.apply(arguments);return i.shift(),this.attributes[t]&&"function"==typeof this.attributes[t]&&!1===this.attributes[t].apply(n,i)&&(e=!1),a.hooks&&a.hooks[t]&&a.hooks[t].forEach(function(t){!1===t.apply(n,i)&&(e=!1)}),!1!==e},initializeBreakpoints:function(){var t=this,e=t.getCurrentBreakpointConfig();t.applyBreakpointConfig(e),s(window,"resize",function(){t.handleResize()})},getCurrentBreakpointConfig:function(){for(var t=window.innerWidth,e=Object.keys(this.breakpoints).map(Number).sort(function(t,e){return e-t}),a=0;a<e.length;a++){var i=e[a];if(i<=t)return{breakpoint:i,config:this.breakpoints[i]}}return null},applyBreakpointConfig:function(t){var e=this;if(t){var a=t.config,t=t.breakpoint;if(e.currentBreakpoint!==t){for(var i in e.currentBreakpoint=t,a)a.hasOwnProperty(i)&&(e.attributes[i]=a[i],"pageSize"===i?e.model.pageSize=a[i]:"pageRange"===i&&(e.model.pageRange=a[i]));e.render(),"function"==typeof e.attributes.callback&&(t=e.getPagingData(e.model.pageNumber||e.attributes.pageNumber),e.attributes.callback(t,e.model))}}},handleResize:function(){var t=this.getCurrentBreakpointConfig();t&&t.breakpoint!==this.currentBreakpoint&&this.applyBreakpointConfig(t)},observer:function(){var i=this,a=i.model.el,t=(s(i.container,o+"go",function(t){t=t.detail;(t="string"==typeof t?parseInt(t.trim()):t)&&("number"!=typeof t&&r('"pageNumber" is incorrect. (Number)'),i.go(t))}),s(a,"click",function(t){var e=t.target.closest(".J-paginationjs-page");if(e){var a=(a=e.getAttribute("data-num"))&&a.trim();if(a&&!e.classList.contains(i.attributes.disableClassName)&&!e.classList.contains(i.attributes.activeClassName))return!1!==i.callHook("beforePageOnClick",t,a)&&(i.go(a),i.callHook("afterPageOnClick",t,a),i.attributes.pageLink?void 0:(t.preventDefault(),!1))}}),s(a,"click",function(t){var e=t.target.closest(".J-paginationjs-previous");if(e){var a=(a=e.getAttribute("data-num"))&&a.trim();if(a&&!e.classList.contains(i.attributes.disableClassName))return!1!==i.callHook("beforePreviousOnClick",t,a)&&(i.go(a),i.callHook("afterPreviousOnClick",t,a),i.attributes.pageLink?void 0:(t.preventDefault(),!1))}}),s(a,"click",function(t){var e=t.target.closest(".J-paginationjs-next");if(e){var a=(a=e.getAttribute("data-num"))&&a.trim();if(a&&!e.classList.contains(i.attributes.disableClassName))return!1!==i.callHook("beforeNextOnClick",t,a)&&(i.go(a),i.callHook("afterNextOnClick",t,a),i.attributes.pageLink?void 0:(t.preventDefault(),!1))}}),s(a,"click",function(t){if(t.target.closest(".J-paginationjs-go-button")){var e=a.querySelector(".J-paginationjs-go-pagenumber").value;if(!1===i.callHook("beforeGoButtonOnClick",t,e))return!1;l(i.container,o+"go",e),i.callHook("afterGoButtonOnClick",t,e)}}),s(a,"keyup",function(t){if(t.target.classList.contains("J-paginationjs-go-pagenumber")&&13===t.which){var e=t.target.value;if(!1===i.callHook("beforeGoInputOnEnter",t,e))return!1;l(i.container,o+"go",e),a.querySelector(".J-paginationjs-go-pagenumber").focus(),i.callHook("afterGoInputOnEnter",t,e)}}),s(a,"change",function(t){if(t.target.classList.contains("J-paginationjs-size-select")){var e=parseInt(t.target.value),a=i.model.pageNumber||i.attributes.pageNumber;if("number"==typeof e)return!1!==i.callHook("beforeSizeSelectorChange",t,e)&&(i.attributes.pageSize=e,i.model.pageSize=e,i.model.totalPage=i.getTotalPage(),a>i.model.totalPage&&(a=i.model.totalPage),i.go(a),i.callHook("afterSizeSelectorChange",t,e),i.attributes.pageLink?void 0:(t.preventDefault(),!1))}}),s(i.container,o+"previous",function(t){i.previous()}),s(i.container,o+"next",function(t){i.next()}),s(i.container,o+"disable",function(t){i.disable()}),s(i.container,o+"enable",function(t){i.enable()}),s(i.container,o+"refresh",function(t){i.refresh()}),s(i.container,o+"show",function(t){i.show()}),s(i.container,o+"hide",function(t){i.hide()}),s(i.container,o+"destroy",function(t){i.destroy()}),Math.max(i.getTotalPage(),1)),e=i.attributes.pageNumber;i.isDynamicTotalNumber&&i.attributes.resetPageNumberOnInit&&(e=1),i.attributes.triggerPagingOnInit&&l(i.container,o+"go",Math.min(e,t))}},a.defaults={totalNumber:0,pageNumber:1,pageSize:10,pageRange:2,showPrevious:!0,showNext:!0,showPageNumbers:!0,showNavigator:!1,showGoInput:!1,showGoButton:!1,showSizeChanger:!1,sizeChangerOptions:[10,20,50,100],pageLink:"",prevText:"&lsaquo;",nextText:"&rsaquo;",ellipsisText:"...",goButtonText:"Go",classPrefix:"paginationjs",activeClassName:"active",disableClassName:"disabled",formatNavigator:"Total <%= totalNumber %> items",formatGoInput:"<%= input %>",formatGoButton:"<%= button %>",position:"bottom",autoHidePrevious:!1,autoHideNext:!1,triggerPagingOnInit:!0,resetPageNumberOnInit:!0,hideOnlyOnePage:!1,hideFirstOnEllipsisShow:!1,hideLastOnEllipsisShow:!1,callback:function(){}},a.prototype.addHook=function(t,e){arguments.length<2&&r("Expect 2 arguments at least."),"function"!=typeof e&&r("callback should be a function.");var a=this.container.paginationData;a||(this.container.paginationData={},a=this.container.paginationData),a.hooks||(a.hooks={}),a.hooks[t]||(a.hooks[t]=[]),a.hooks[t].push(e)},a.create=function(t,e){if(arguments.length<2&&r("Requires two parameters."),t="string"!=typeof t&&t instanceof Element?t:document.querySelector(t))return new a(t,e)},n.Pagination=a,"function"==typeof define&&define.amd&&define(function(){return a}),"undefined"!=typeof module&&module.exports&&(module.exports=a)})(this);
